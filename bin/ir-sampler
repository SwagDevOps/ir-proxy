#!/usr/bin/env ruby
# frozen_string_literal: true

# Print randomized samples
#
# Simulate ouptut genereated by:
#
# ```sh
# sudo ir-keytable -a /etc/rc_maps.cfg -t
# ```

autoload(:Pathname, 'pathname')
Pathname.new(__dir__).join('../lib', 'ir_proxy.rb').tap do |file|
  # noinspection RubyResolve
  require_relative file if file.file?
end

autoload(:IrProxy, 'ir_proxy')
require 'sys/proc'

Pathname.new(__FILE__).basename.to_s.tap { |name| Sys::Proc.progname = name }

begin
  IrProxy::Sampler.new.tap(&:call)
rescue Errno::EPIPE
  exit(0)
end
